<div class="govuk-grid-row" *ngIf="validateSuccess">
  <div class="govuk-grid-column-two-thirds govuk-!-margin-top-2">
    <app-inset-text [color]="'success'">
      The files have passed validation with <strong>0</strong> warnings.
    </app-inset-text>
  </div>
</div>

<table class="govuk-table" [class.govuk-!-margin-top-6]="!validateSuccess">
  <thead class="govuk-table__head">
    <tr class="govuk-table__row">
      <th class="govuk-table__header" scope="col">File name</th>
      <th class="govuk-table__header" scope="col">File type</th>
      <th class="govuk-table__header" scope="col">Records in the file</th>
      <th class="govuk-table__header" scope="col">Uploaded by</th>
      <th class="govuk-table__header" scope="col">Validation</th>
    </tr>
  </thead>
  <tbody class="govuk-table__body">
    <tr class="govuk-table__row" *ngFor="let file of uploadedFiles">
      <td class="govuk-table__cell" scope="row">{{ file.name }}</td>
      <td class="govuk-table__cell">{{ file.fileType ? file.fileType : file.extension }}</td>
      <td class="govuk-table__cell">{{ file.records ? file.records : '-' }}</td>
      <td class="govuk-table__cell">-</td>
      <td class="govuk-table__cell">
        <app-file-validate-status [status]="file.status"></app-file-validate-status>
      </td>
    </tr>
  </tbody>
</table>

<ng-container *ngIf="!validateSuccess">
  <p>The files must be validated before completing the upload.</p>

  <button
    type="button"
    class="govuk-button govuk-button--tertiary govuk-!-margin-top-2"
    (click)="validateFiles()"
  >
    Validate files
  </button>
</ng-container>

<ng-container *ngIf="validateSuccess">
  <p>You need to complete the upload to import the data.</p>

  <button
    type="button"
    class="govuk-button govuk-button--tertiary govuk-!-margin-top-2"
    (click)="importFiles()"
  >
    Complete upload
  </button>
</ng-container>
