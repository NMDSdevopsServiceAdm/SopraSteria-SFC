<div id="benchmarks-tiles">
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-one-half">
      <h2 class="govuk-heading-m">Benchmarks</h2>
    </div>
    <div class="govuk-grid-column-one-half">
      <a
        class="govuk-list govuk-list--inline govuk-list govuk__flex govuk__align-items-center"
        role="button"
        draggable="false"
        href="/benchmarks.pdf"
        data-html2canvas-ignore
        data-testid="download-button"
        (click)="downloadAsPDF($event)"
      >
        <img alt="" src="/assets/images/icon-download.svg" /><span class="govuk-!-margin-left-1">
          Download Benchmarks PDF (89KB, 2 pages)
        </span>
      </a>
    </div>
  </div>
  <app-comparison-group-header
    #comparisonGroupText
    [meta]="tilesData.meta"
    [workplaceID]="this.workplace.uid"
  ></app-comparison-group-header>
  <div class="govuk-grid-row">
    <app-benchmark-tile
      [title]="'Pay'"
      [description]="'Average hourly pay for a care worker.'"
      [showYourWorkplace]="tilesData.tiles.pay?.workplaceValue.hasValue"
      [showComparisonGroup]="tilesData.tiles.pay?.comparisonGroup.hasValue"
    >
      <your-workplace>
        <ng-container *ngIf="tilesData.tiles.pay?.workplaceValue.hasValue; else payYourEmpty">
          {{ formatPay(tilesData.tiles.pay.workplaceValue.value) }}
        </ng-container>
        <ng-template #payYourEmpty> You've not added any data about hourly pay yet. </ng-template>
      </your-workplace>
      <comparison-group>
        <ng-container *ngIf="tilesData.tiles.pay?.comparisonGroup.hasValue; else payCompEmpty">
          {{ formatPay(tilesData.tiles.pay.comparisonGroup.value) }}
        </ng-container>
        <ng-template #payCompEmpty> We do not have enough data to show this comparison yet. </ng-template>
      </comparison-group>
    </app-benchmark-tile>
    <app-benchmark-tile
      [title]="'Turnover'"
      [description]="'Staff (permanent and temps) left in the last 12 months.'"
      [showYourWorkplace]="tilesData.tiles.turnover?.workplaceValue.hasValue"
      [showComparisonGroup]="tilesData.tiles.turnover?.comparisonGroup.hasValue"
    >
      <your-workplace>
        <ng-container *ngIf="tilesData.tiles.turnover?.workplaceValue.hasValue">
          {{ formatPercent(tilesData.tiles.turnover.workplaceValue.value) }}
        </ng-container>
        <ng-container [ngSwitch]="tilesData.tiles.turnover?.workplaceValue.stateMessage">
          <ng-container *ngSwitchCase="'no-workers'">
            For this to show, there must be a staff record for every staff member.
          </ng-container>
          <ng-container *ngSwitchCase="'no-data'"> You've not added any data about leavers yet. </ng-container>
          <ng-container *ngSwitchCase="'check-data'">
            Your turnover seems to be over 999%, please contact us.
          </ng-container>
          <ng-container *ngSwitchCase="'no-permTemp'">
            You need records for permanent or temporary staff to see turnover.
          </ng-container>
        </ng-container>
      </your-workplace>
      <comparison-group>
        <ng-container *ngIf="tilesData.tiles.turnover?.comparisonGroup.hasValue; else turnCompEmpty">
          {{ formatPercent(tilesData.tiles.turnover.comparisonGroup.value) }}
        </ng-container>
        <ng-template #turnCompEmpty> We do not have enough data to show this comparison yet. </ng-template>
      </comparison-group>
    </app-benchmark-tile>
    <app-benchmark-tile
      #sicknessTile
      [title]="'Sickness'"
      [description]="'Average days each worker was off in the last 12 months.'"
      [showYourWorkplace]="tilesData.tiles.sickness?.workplaceValue.hasValue"
      [showComparisonGroup]="tilesData.tiles.sickness?.comparisonGroup.hasValue"
    >
      <your-workplace>
        <ng-container *ngIf="tilesData.tiles.sickness?.workplaceValue.hasValue; else sicknessYourEmpty">
          {{ tilesData.tiles.sickness.workplaceValue.value }}
        </ng-container>
        <ng-template #sicknessYourEmpty> You've not added any data about sickness yet. </ng-template>
      </your-workplace>
      <comparison-group>
        <ng-container *ngIf="tilesData.tiles.sickness?.comparisonGroup.hasValue; else sicknessCompEmpty">
          {{ tilesData.tiles.sickness.comparisonGroup.value }}
        </ng-container>
        <ng-template #sicknessCompEmpty> We do not have enough data to show this comparison yet. </ng-template>
      </comparison-group>
    </app-benchmark-tile>
    <app-benchmark-tile
      #qualificationsTile
      [title]="'Qualifications'"
      [description]="'Care-providing staff with a relevant level 2 or above.'"
      [showYourWorkplace]="tilesData.tiles.qualifications?.workplaceValue.hasValue"
      [showComparisonGroup]="tilesData.tiles.qualifications?.comparisonGroup.hasValue"
    >
      <your-workplace>
        <ng-container *ngIf="tilesData.tiles.qualifications?.workplaceValue.hasValue; else qualYourEmpty">
          {{ formatPercent(tilesData.tiles.qualifications.workplaceValue.value) }}
        </ng-container>
        <ng-template #qualYourEmpty> You've not added any data about social care qualifications yet. </ng-template>
      </your-workplace>
      <comparison-group>
        <ng-container *ngIf="tilesData.tiles.qualifications?.comparisonGroup.hasValue; else qualCompEmpty">
          {{ formatPercent(tilesData.tiles.qualifications.comparisonGroup.value) }}
        </ng-container>
        <ng-template #qualCompEmpty> We do not have enough data to show this comparison yet. </ng-template>
      </comparison-group>
    </app-benchmark-tile>
  </div>
  <app-benchmarks-about-the-data #aboutData class="hidden" [workplace]="workplace"></app-benchmarks-about-the-data>
</div>
<highcharts-chart
  class="chart"
  [Highcharts]="Highcharts"
  [options]="chartOptions"
  style="width: 100%; height: 360px; display: block"
></highcharts-chart>

<app-gauge [maxRank]="45" [currentRank]="11"></app-gauge>
