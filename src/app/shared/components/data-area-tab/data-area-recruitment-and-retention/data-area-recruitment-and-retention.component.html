<div>
  <table class="govuk-table govuk-!-margin-top-2">
    <thead class="govuk-table__head">
      <tr class="govuk-table__row">
        <th scope="col" class="govuk-table__header"></th>
        <th scope="col" class="govuk-table__header commparision-table-header govuk-!-text-align-centre">
          Your workplace
        </th>
        <th scope="col" class="govuk-table__header commparision-table-header govuk-!-text-align-centre">
          Comparison group
        </th>
      </tr>
    </thead>
    <tbody class="govuk-table__body">
      <tr class="govuk-table__row first-row" data-testid="vacancyRow">
        <th scope="row" class="govuk-table__header commparision-row-header govuk-!-font-weight-regular">
          Vacancy rate
        </th>
        <td class="govuk-table__cell workplace-cell">
          {{ data?.vacancyRate.workplaceValue.value * 100 | number: '1.0-0' }}%
        </td>
        <td class="govuk-table__cell comparision-group-cell">
          <ng-container *ngIf="viewBenchmarksComparisonGroups; else vacancyTotalComparison">
            {{ data?.vacancyRate.goodCqc.value * 100 | number: '1.0-0' }}%
          </ng-container>
          <ng-template #vacancyTotalComparison>
            {{ data?.vacancyRate.comparisonGroup.value * 100 | number: '1.0-0' }}%
          </ng-template>
        </td>
      </tr>
      <tr class="govuk-table__row" data-testid="turnoverRow">
        <th scope="row" class="govuk-table__header commparision-row-header govuk-!-font-weight-regular">
          Turnover rate
        </th>
        <td class="govuk-table__cell workplace-cell">
          {{ data?.turnoverRate.workplaceValue.value * 100 | number: '1.0-0' }}%
        </td>
        <td class="govuk-table__cell comparision-group-cell">
          <ng-container *ngIf="viewBenchmarksComparisonGroups; else turnoverTotalComparison">
            {{ data?.turnoverRate.goodCqc.value * 100 | number: '1.0-0' }}%
          </ng-container>
          <ng-template #turnoverTotalComparison>
            {{ data?.turnoverRate.comparisonGroup.value * 100 | number: '1.0-0' }}%
          </ng-template>
        </td>
      </tr>
      <tr class="govuk-table__row" data-testid="timeInRoleRow">
        <th scope="row" class="govuk-table__header govuk-!-font-weight-regular">
          Percentage of staff still in their main job role after 12 months
        </th>
        <td class="govuk-table__cell workplace-cell">
          {{ data?.timeInRole.workplaceValue.value * 100 | number: '1.0-0' }}%
        </td>
        <td class="govuk-table__cell comparision-group-cell">
          <ng-container *ngIf="viewBenchmarksComparisonGroups; else timeInRoleTotalComparison">
            {{ data?.timeInRole.goodCqc.value * 100 | number: '1.0-0' }}%
          </ng-container>
          <ng-template #timeInRoleTotalComparison>
            {{ data?.timeInRole.comparisonGroup.value * 100 | number: '1.0-0' }}%
          </ng-template>
        </td>
      </tr>
    </tbody>
  </table>

  <div class="govuk-width-container govuk-!-margin-top-7">
    <app-benchmarks-select-view-panel
      [falseSelectionName]="'Where you rank'"
      [trueSelectionName]="'Where you\'re positioned'"
      (handleViewToggle)="handleViewBenchmarkPosition($event)"
    >
    </app-benchmarks-select-view-panel>
    <ng-container *ngIf="viewBenchmarksPosition; else showRankings">
      <div class="govuk-!-margin-top-7" data-testid="barcharts">
        <app-data-area-barchart
          [positionedTitle]="'Vacancy rate'"
          [payMoreThanWorkplacesNumber]="54"
          [workplacesNumber]="72"
        ></app-data-area-barchart>
        <app-data-area-barchart
          [positionedTitle]="'Turnover rate'"
          [payMoreThanWorkplacesNumber]="21"
          [workplacesNumber]="72"
        ></app-data-area-barchart>
        <app-data-area-barchart
          [positionedTitle]="'Percentage of staff still in their main job role after 12 months'"
          [payMoreThanWorkplacesNumber]="36"
          [workplacesNumber]="72"
        ></app-data-area-barchart>
      </div>
    </ng-container>
    <ng-template #showRankings>
      <div class="govuk-!-margin-top-7" data-testid="rankings">
        <app-data-area-ranking
          [rankingTitle]="'Vacancy rate'"
          [workplaceRankNumber]="vacancyCurrentRank"
          [workplacesNumber]="vacancyMaxRank"
        ></app-data-area-ranking>
        <app-data-area-ranking
          [rankingTitle]="'Turnover rate'"
          [workplaceRankNumber]="turnoverCurrentRank"
          [workplacesNumber]="turnoverMaxRank"
        ></app-data-area-ranking>
        <app-data-area-ranking
          [rankingTitle]="'Percentage of staff still in their main job role after 12 months'"
          [workplaceRankNumber]="timeInRoleCurrentRank"
          [workplacesNumber]="timeInRoleMaxRank"
        ></app-data-area-ranking>
      </div>
    </ng-template>
  </div>
  <div class="govuk-!-margin-top-7">
    <h2 class="govuk-heading-m">Useful links</h2>
    <app-data-area-useful-link
      [linkTitle]="'International recruitment'"
      [linkUrl]="['/internal-recruitment']"
      [linkDescription]="
        'International recruitment can help you develop a skilled and diverse workforce, but it can also be daunting for employers. We\'ve collected together the resources that\'ll support you every step of the way.'
      "
    ></app-data-area-useful-link>

    <app-data-area-useful-link
      [linkTitle]="'Social media for recruiting care workers'"
      [linkUrl]="['/social-media-for-recruiting']"
      [linkDescription]="
        'Social media is a great way to attract new people and generate interest in your organisation. This guide offers tips and advice to help you make the most of well-known platforms and attract people of different ages.'
      "
    ></app-data-area-useful-link>

    <app-data-area-useful-link
      [linkTitle]="'Maximise retention'"
      [linkUrl]="['/maximise-retention']"
      [linkDescription]="
        'This webinar shares sector expertise around maximising the retention of your staff. Discover top tips and innovative solutions for staff retention and practical ideas from other managers.'
      "
    ></app-data-area-useful-link>

    <app-data-area-useful-link
      [linkTitle]="'Planning your recruitment'"
      [linkUrl]="['/planning-recruitment']"
      [linkDescription]="
        'A good workforce plan will help your organisation be more successful and make sure you have the right people in place to meet the needs and future opportunities for your business.'
      "
    ></app-data-area-useful-link>

    <app-data-area-useful-link
      [linkTitle]="'Maximising recruitment'"
      [linkUrl]="['/maximising-recruitment']"
      [linkDescription]="'This webinar shares sector expertise to support you in the recruitment process.'"
    ></app-data-area-useful-link>
  </div>
</div>
