<h2 class="govuk-heading-m">Training and qualifications</h2>
<dl class="govuk-summary-list asc-summarylist-border-top govuk-!-margin-bottom-0">
  <div
    class="govuk-summary-list__row"
    [ngClass]="{
      'govuk-summary-list__row-above-message': wdfView && !worker.careCertificate
    }"
  >
    <dt class="govuk-summary-list__key govuk-!-width-one-half">Care Certificate</dt>

    <dd class="govuk-summary-list__value govuk-!-padding-left-2">
      {{ worker.careCertificate || '-' }}
      <app-wdf-field-confirmation
        *ngIf="
          canEditWorker &&
          wdfView &&
          worker.wdf?.careCertificate.isEligible === 'Yes' &&
          !worker.wdf?.careCertificate.updatedSinceEffectiveDate &&
          worker.careCertificate !== 'Yes, completed'
        "
        [changeLink]="getRoutePath('care-certificate', wdfView)"
        (fieldConfirmation)="this.confirmField('careCertificate')"
        (setReturnClicked)="this.setReturn()"
        [workerUid]="worker.uid"
      ></app-wdf-field-confirmation>
    </dd>
    <dd *ngIf="canEditWorker" class="govuk-summary-list__actions">
      <app-summary-record-change
        *ngIf="
          !(
            wdfView &&
            worker.wdf?.careCertificate.isEligible === 'Yes' &&
            !worker.wdf?.careCertificate.updatedSinceEffectiveDate &&
            worker.careCertificate !== 'Yes, completed'
          )
        "
        [explanationText]="' care certificate'"
        [link]="getRoutePath('care-certificate', wdfView)"
        [hasData]="!!worker.careCertificate"
        (setReturnClicked)="this.setReturn()"
      ></app-summary-record-change>
    </dd>
  </div>
  <app-wdf-warning-message
    *ngIf="wdfView && !worker.careCertificate"
    [overallWdfEligibility]="overallWdfEligibility"
    data-testid="careCertificateWdfWarning"
  ></app-wdf-warning-message>

  <div class="govuk-summary-list__row">
    <dt class="govuk-summary-list__key govuk-!-width-one-half">Level 2 Adult Social Care Certificate</dt>

    <dd class="govuk-summary-list__value govuk-!-padding-left-2">
      {{ worker.level2CareCertificate?.value || '-' }}
    </dd>
    <dd *ngIf="canEditWorker" class="govuk-summary-list__actions">
      <app-summary-record-change
        [explanationText]="' level 2 adult social care certificate'"
        [link]="getRoutePath('level-2-care-certificate', wdfView)"
        [hasData]="!!worker.level2CareCertificate?.value"
        (setReturnClicked)="this.setReturn()"
      ></app-summary-record-change>
    </dd>
  </div>

  <div class="govuk-summary-list__row">
    <dt class="govuk-summary-list__key">Apprenticeship training</dt>
    <dd class="govuk-summary-list__value govuk-!-padding-left-2">
      {{ worker.apprenticeshipTraining || '-' | closedEndedAnswer }}
    </dd>
    <dd *ngIf="canEditWorker" class="govuk-summary-list__actions">
      <app-summary-record-change
        [explanationText]="' apprenticeship training'"
        [link]="getRoutePath('apprenticeship-training', wdfView)"
        [hasData]="!!worker.apprenticeshipTraining"
        (setReturnClicked)="this.setReturn()"
      ></app-summary-record-change>
    </dd>
  </div>

  <div
    class="govuk-summary-list__row"
    [ngClass]="{
      'govuk-summary-list__row-above-message': wdfView && !worker.qualificationInSocialCare
    }"
  >
    <dt class="govuk-summary-list__key">Has a social care qualification</dt>
    <dd class="govuk-summary-list__value govuk-!-padding-left-2">
      {{ worker.qualificationInSocialCare || '-' | closedEndedAnswer }}
      <app-wdf-field-confirmation
        *ngIf="
          canEditWorker &&
          wdfView &&
          worker.wdf?.qualificationInSocialCare.isEligible === 'Yes' &&
          !worker.wdf?.qualificationInSocialCare.updatedSinceEffectiveDate &&
          worker.qualificationInSocialCare !== 'Yes'
        "
        [changeLink]="getRoutePath('social-care-qualification', wdfView)"
        (fieldConfirmation)="this.confirmField('qualificationInSocialCare')"
        (setReturnClicked)="this.setReturn()"
        [workerUid]="worker.uid"
      ></app-wdf-field-confirmation>
    </dd>
    <dd *ngIf="canEditWorker" class="govuk-summary-list__actions">
      <app-summary-record-change
        *ngIf="
          !(
            wdfView &&
            worker.wdf?.qualificationInSocialCare.isEligible === 'Yes' &&
            !worker.wdf?.qualificationInSocialCare.updatedSinceEffectiveDate &&
            worker.qualificationInSocialCare !== 'Yes'
          )
        "
        [explanationText]="' relevant social care qualification'"
        [link]="getRoutePath('social-care-qualification', wdfView)"
        [hasData]="!!worker.qualificationInSocialCare"
        (setReturnClicked)="this.setReturn()"
      ></app-summary-record-change>
    </dd>
  </div>
  <app-wdf-warning-message
    *ngIf="wdfView && !worker.qualificationInSocialCare"
    [overallWdfEligibility]="overallWdfEligibility"
    data-testid="qualificationInSocialCareWdfWarning"
  ></app-wdf-warning-message>

  <ng-container *ngIf="displaySocialCareQualifications">
    <div
      class="govuk-summary-list__row"
      [ngClass]="{
        'govuk-summary-list__row-above-message': wdfView && !worker.socialCareQualification
      }"
    >
      <dt class="govuk-summary-list__key">Highest level of social care qualification</dt>
      <dd class="govuk-summary-list__value govuk-!-padding-left-2">
        {{ worker.socialCareQualification?.title | closedEndedAnswer }}
        <app-wdf-field-confirmation
          *ngIf="
            canEditWorker &&
            wdfView &&
            worker.wdf?.socialCareQualification.isEligible === 'Yes' &&
            !worker.wdf?.socialCareQualification.updatedSinceEffectiveDate
          "
          [changeLink]="getRoutePath('social-care-qualification-level', wdfView)"
          (fieldConfirmation)="
            this.confirmField('socialCareQualification'); this.confirmField('qualificationInSocialCare')
          "
          (setReturnClicked)="this.setReturn()"
          [workerUid]="worker.uid"
        ></app-wdf-field-confirmation>
      </dd>
      <dd *ngIf="canEditWorker" class="govuk-summary-list__actions">
        <app-summary-record-change
          *ngIf="
            !(
              wdfView &&
              worker.wdf?.socialCareQualification.isEligible === 'Yes' &&
              !worker.wdf?.socialCareQualification.updatedSinceEffectiveDate
            )
          "
          [explanationText]="' social care qualification level'"
          [link]="getRoutePath('social-care-qualification-level', wdfView)"
          [hasData]="!!worker.socialCareQualification"
          (setReturnClicked)="this.setReturn()"
        ></app-summary-record-change>
      </dd>
    </div>
    <app-wdf-warning-message
      *ngIf="wdfView && !worker.socialCareQualification"
      [overallWdfEligibility]="overallWdfEligibility"
      data-testid="socialCareQualificationWdfWarning"
    ></app-wdf-warning-message>
  </ng-container>

  <div
    class="govuk-summary-list__row"
    [ngClass]="{
      'govuk-summary-list__row-above-message': wdfView && !worker.otherQualification
    }"
  >
    <dt class="govuk-summary-list__key">Other qualifications</dt>
    <dd class="govuk-summary-list__value govuk-!-padding-left-2">
      {{ worker.otherQualification || '-' | closedEndedAnswer }}
      <app-wdf-field-confirmation
        *ngIf="
          canEditWorker &&
          wdfView &&
          worker.wdf?.otherQualification.isEligible === 'Yes' &&
          !worker.wdf?.otherQualification.updatedSinceEffectiveDate &&
          worker.otherQualification !== 'Yes'
        "
        [changeLink]="getRoutePath('other-qualifications', wdfView)"
        (fieldConfirmation)="this.confirmField('otherQualification')"
        (setReturnClicked)="this.setReturn()"
        [workerUid]="worker.uid"
      ></app-wdf-field-confirmation>
    </dd>
    <dd *ngIf="canEditWorker" class="govuk-summary-list__actions">
      <app-summary-record-change
        [explanationText]="' other qualifications'"
        [link]="getRoutePath('other-qualifications', wdfView)"
        [hasData]="!!worker.otherQualification"
        (setReturnClicked)="this.setReturn()"
      ></app-summary-record-change>
    </dd>
  </div>
  <app-wdf-warning-message
    *ngIf="wdfView && !worker.otherQualification"
    [overallWdfEligibility]="overallWdfEligibility"
    data-testid="otherQualificationWdfWarning"
  ></app-wdf-warning-message>

  <ng-container *ngIf="displayOtherQualifications">
    <div
      class="govuk-summary-list__row"
      [ngClass]="{
        'govuk-summary-list__row-above-message': wdfView && !worker.highestQualification
      }"
    >
      <dt class="govuk-summary-list__key">Highest level of other qualifications</dt>
      <dd class="govuk-summary-list__value govuk-!-padding-left-2">
        {{ worker.highestQualification?.title || '-' }}
        <app-wdf-field-confirmation
          *ngIf="
            canEditWorker &&
            wdfView &&
            worker.wdf?.highestQualification.isEligible === 'Yes' &&
            !worker.wdf?.highestQualification.updatedSinceEffectiveDate
          "
          [changeLink]="getRoutePath('other-qualifications-level', wdfView)"
          (fieldConfirmation)="this.confirmField('highestQualification'); this.confirmField('otherQualification')"
          (setReturnClicked)="this.setReturn()"
          [workerUid]="worker.uid"
        ></app-wdf-field-confirmation>
      </dd>
      <dd *ngIf="canEditWorker" class="govuk-summary-list__actions">
        <app-summary-record-change
          *ngIf="
            !(
              wdfView &&
              worker.wdf?.highestQualification.isEligible === 'Yes' &&
              !worker.wdf?.highestQualification.updatedSinceEffectiveDate
            )
          "
          [explanationText]="' other qualification level'"
          [link]="getRoutePath('other-qualifications-level', wdfView)"
          [hasData]="!!worker.highestQualification"
          (setReturnClicked)="this.setReturn()"
        ></app-summary-record-change>
      </dd>
    </div>
    <app-wdf-warning-message
      *ngIf="wdfView && !worker.highestQualification"
      [overallWdfEligibility]="overallWdfEligibility"
      data-testid="highestQualificationWdfWarning"
    ></app-wdf-warning-message>
  </ng-container>
</dl>
